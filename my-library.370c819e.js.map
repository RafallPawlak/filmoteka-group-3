{"mappings":"iiBAAAA,EAAA,S,sBCAA,IAAAC,EAAAD,EAAA,S,aCAAE,EAAAF,EAAA,SCAAG,G,aAAAH,EAAA,U,sBAAsBI,EAAaC,G,OAAbC,EAAYC,MAAAC,KAAAC,U,UAAZH,I,OAAAA,EAAfI,EAAAP,EAAA,CAAAO,EAAAC,GAAAC,MAAA,SAAAC,EAA4BR,G,IAKzBS,EAGAC,EACAC,E,kFAPa,mCACH,gCAEVF,EAAS,IAAIG,gBAAgB,CACjCC,QAJiB,qC,SAMIC,MAAMC,sCAAqBf,EAAU,IAAMS,G,cAA5DC,EAAQM,EAAAC,K,SACMP,EAASQ,O,cAAvBP,EAAKK,EAAAC,K,kBACJN,G,kCAELQ,QAAQC,IAAI,iBAAgBJ,EAAAK,I,2DAZAnB,MAAAC,KAAAC,U,kBDI5BkB,EAAcC,SAASC,cAAc,kBACrCC,EAAcF,SAASC,cAAc,aAC9BE,EAAgBH,SAASC,cAAc,sBACvCG,EAAcJ,SAASC,cAAc,oBAClCD,SAASC,cAAc,YAMhC,SAASI,IACdN,EAAYO,UAAY,GACxBJ,EAAYI,UAAY,GAExB,IAAIC,EAAgB,GAChBC,EAAc,IACd,EAAAC,EAAAC,QAAO,aACTH,GAAgB,EAAAE,EAAAC,QAAO,aAErB,EAAAD,EAAAC,QAAO,WACTF,GAAc,EAAAC,EAAAC,QAAO,UAEvB,IAAMC,EAAc7B,EAAAR,EAAD,CAAIiC,GAAAK,OAAe9B,EAAAR,EAAA,CAAGkC,IAEzC,GAA6B,IAAzBD,EAAcM,QAAuC,IAAvBL,EAAYK,OAAc,CAI1DX,EAAYY,mBAAmB,YAHN,uU,KAIpB,CAELZ,EAAYY,mBAAmB,YADL,sD,IAErBC,GAAM,EAANC,GAAM,EAANC,OAAMC,E,IAAX,QAAKC,EAAAC,EAAUT,EAAUU,OAAAC,cAApBP,GAAAI,EAAAC,EAAMG,QAAAC,MAANT,GAAM,GACTvC,EADG2C,EAAMM,OACQC,MAAK,SAAAC,GACpB,IAAIC,EAAe,IAAIC,KAAKF,EAAKG,cAC3BC,EAAcJ,EAAKK,OAAOC,KAAI,SAAAC,GAClC,OAAOA,EAAMC,I,IAETC,EAAS,sFAKTxB,OAF0Be,EAAKU,GAAG,6EAMhBzB,OAJlBe,EAAKW,YACN,kFAKoC1B,OAFjBe,EAAKY,MAAM,qGAEkB3B,OAAZe,EAAKU,GAAG,MAErCzB,OAFyCmB,EAAYS,KAC/D,MACA,YAC0C5B,OADhCgB,EAAaa,cAAc,4DAG/B7B,QAFoC,EAAAvC,EAAAqE,4BACpCf,EAAKgB,cACL,+FAMR5C,EAAYe,mBAAmB,YAAasB,E,cA5B3CpB,GAAM,EAANC,EAAM2B,C,aAAN7B,GAAM,MAANK,EAAMyB,QAANzB,EAAMyB,Q,YAAN7B,E,MAAAC,C,IAkCF,SAAS6B,IACd/C,EAAYO,UAAY,GACxBJ,EAAYI,UAAY,GAExB,IAAMyC,GAAS,EAAAtC,EAAAC,QAAO,WAEtBsC,EAAkB7C,GAClB8C,EAAqB7C,G,IAQdW,GAAM,EAANC,GAAM,EAANC,OAAMC,EANb,GAAK6B,GAA4B,IAAlBA,EAAOlC,OAKrB,IACC,QAAKM,EAAAC,EAAU2B,EAAM1B,OAAAC,cAAhBP,GAAAI,EAAAC,EAAMG,QAAAC,MAANT,GAAM,GACTvC,EADG2C,EAAMM,OACQC,MAAK,SAAAC,GACpB,IAAIC,EAAe,IAAIC,KAAKF,EAAKG,cAC3BC,EAAcJ,EAAKK,OAAOC,KAAI,SAAAC,GAClC,OAAOA,EAAMC,I,IAETC,EAAS,sFAKTxB,OAF0Be,EAAKU,GAAG,6EAMhBzB,OAJlBe,EAAKW,YACN,kFAKoC1B,OAFjBe,EAAKY,MAAM,qGAEkB3B,OAAZe,EAAKU,GAAG,MAErCzB,OAFyCmB,EAAYS,KAC/D,MACA,YAC0C5B,OADhCgB,EAAaa,cAAc,4DAG/B7B,QAFoC,EAAAvC,EAAAqE,4BACpCf,EAAKgB,cACL,+FAMR5C,EAAYe,mBAAmB,YAAasB,E,cA5B3CpB,GAAM,EAANC,EAAM2B,C,aAAN7B,GAAM,MAANK,EAAMyB,QAANzB,EAAMyB,Q,YAAN7B,E,MAAAC,C,MAN6B,CAIlCf,EAAYY,mBAAmB,YAHN,iT,EAuCtB,SAASoC,IACdnD,EAAYO,UAAY,GACxBJ,EAAYI,UAAY,GAExB,IAAMyC,GAAS,EAAAtC,EAAAC,QAAO,SAEtBsC,EAAkB5C,GAClB6C,EAAqB9C,G,IAQdY,GAAM,EAANC,GAAM,EAANC,OAAMC,EANb,GAAK6B,GAA4B,IAAlBA,EAAOlC,OAKrB,IACC,QAAKM,EAAAC,EAAU2B,EAAM1B,OAAAC,cAAhBP,GAAAI,EAAAC,EAAMG,QAAAC,MAANT,GAAM,GACTvC,EADG2C,EAAMM,OACQC,MAAK,SAAAC,GACpB,IAAIC,EAAe,IAAIC,KAAKF,EAAKG,cAC3BC,EAAcJ,EAAKK,OAAOC,KAAI,SAAAC,GAClC,OAAOA,EAAMC,I,IAETC,EAAS,sFAKTxB,OAF0Be,EAAKU,GAAG,6EAMhBzB,OAJlBe,EAAKW,YACN,kFAKoC1B,OAFjBe,EAAKY,MAAM,qGAEkB3B,OAAZe,EAAKU,GAAG,MAErCzB,OAFyCmB,EAAYS,KAC/D,MACA,YAC0C5B,OADhCgB,EAAaa,cAAc,4DAG/B7B,QAFoC,EAAAvC,EAAAqE,4BACpCf,EAAKgB,cACL,+FAMR5C,EAAYe,mBAAmB,YAAasB,E,cA5B3CpB,GAAM,EAANC,EAAM2B,C,aAAN7B,GAAM,MAANK,EAAMyB,QAANzB,EAAMyB,Q,YAAN7B,E,MAAAC,C,MAN6B,CAIlCf,EAAYY,mBAAmB,YAHN,6S,EAvH7BT,IACAF,EAAcgD,iBAAiB,QAASL,GACxC1C,EAAY+C,iBAAiB,QAASD,GA4JtC,IAAMF,EAAoB,SAAAI,GACpBA,EAAgBC,UAAUC,SAAS,gBAGvCF,EAAgBC,UAAUE,IAAI,c,EAG1BN,EAAuB,SAAAO,GACtBA,EAAqBH,UAAUC,SAAS,gBAG7CE,EAAqBH,UAAUI,OAAO,c,EDzKlCC,EAAO1D,SAASC,cAAc,QAC9B0D,EAAO3D,SAASC,cAAc,qBAC9B2D,EAAQ5D,SAASC,cAAc,gBAC/B4D,EAAW7D,SAASC,cAAc,aAuBjC,SAAS6D,IACdF,EAAMP,UAAUU,OAAO,aACvBL,EAAKL,UAAUI,OAAO,Y,CAOxB,SAASO,EAAWC,GACC,WAAfA,EAAMC,OACRJ,IACAK,OAAOC,oBAAoB,UAAWJ,G,CAI1C,SAASK,IAEJlE,EAAckD,UAAUC,SAAS,gBACjClD,EAAYiD,UAAUC,SAAS,gBAEhCjD,IAEEF,EAAckD,UAAUC,SAAS,gBACnCR,IAEE1C,EAAYiD,UAAUC,SAAS,gBACjCJ,G,CAhDAS,GACFA,EAAKR,iBAAiB,SAGjB,SAAmBmB,GACxB,GAAyC,UAArCA,EAAEC,OAAOC,cAAcC,UACzB,OAqBFb,EAAMP,UAAUU,OAAO,aAlBvBL,EAAKL,UAAUE,IAAI,aACnBY,OAAOhB,iBAAiB,UAAWa,GACnC,IAAM3B,EAAKiC,EAAEC,OAAOC,cAAcE,QAAQrC,IAC1C,EAAAhE,EAAAsG,qBAAoBtC,GAAIX,MAAK,WAC3B,IAAMkD,EAAW5E,SAASC,cAAc,sBACxC2E,EAASzB,iBAAiB,QAASW,GACnCc,EAASzB,iBAAiB,QAASkB,IACnC,EAAA5D,EAAAoE,wBAAuBxC,IACvB,EAAA5B,EAAAqE,kBAAiBzC,E,OAmCrBwB,EAASV,iBAAiB,SAAS,SAACmB,GACP,aAAvBA,EAAEC,OAAOE,WACXX,G","sources":["src/my-library.js","src/js/modalMovie-myLibrary.js","src/js/showMyLibraryLists.js","src/js/fetchApiById.js"],"sourcesContent":["import './js/fetchMovie';\nimport './js/modal-footer';\nimport './js/modal-teams';\nimport './js/modalMovie-myLibrary';\nimport './js/localStorage';\nimport './js/showMyLibraryLists';\n","import { descriptionTagMovie } from './fetchMovie';\nimport { changeWatchedQueueList, textModalButtons } from './localStorage';\nimport {\n  showFullLibrary,\n  showWatched,\n  showQueue,\n  btnLibWatched,\n  btnLibQueue,\n} from './showMyLibraryLists';\n\nconst body = document.querySelector('body');\nconst card = document.querySelector('[data-modal-open]');\nconst modal = document.querySelector('[data-modal]');\nconst backdrop = document.querySelector('.backdrop');\n\nif (card) {\n  card.addEventListener('click', openModal);\n}\n\nexport function openModal(e) {\n  if (e.target.parentElement.className !== 'thumb') {\n    return;\n  }\n  toggleModal();\n  body.classList.add('no-scroll');\n  window.addEventListener('keydown', onEscClick);\n  const id = e.target.parentElement.dataset.id;\n  descriptionTagMovie(id).then(() => {\n    const closeBtn = document.querySelector('[data-movie-close]');\n    closeBtn.addEventListener('click', closeModal);\n    closeBtn.addEventListener('click', loadLibraryListOnModalClose);\n    changeWatchedQueueList(id);\n    textModalButtons(id);\n  });\n}\n\nexport function closeModal() {\n  modal.classList.toggle('is-hidden');\n  body.classList.remove('no-scroll');\n}\n\nfunction toggleModal() {\n  modal.classList.toggle('is-hidden');\n}\n\nfunction onEscClick(event) {\n  if (event.code === 'Escape') {\n    closeModal();\n    window.removeEventListener('keydown', onEscClick);\n  }\n}\n\nfunction loadLibraryListOnModalClose() {\n  if (\n    !btnLibWatched.classList.contains('btn--active') &&\n    !btnLibQueue.classList.contains('btn--active')\n  ) {\n    showFullLibrary();\n  }\n  if (btnLibWatched.classList.contains('btn--active')) {\n    showWatched();\n  }\n  if (btnLibQueue.classList.contains('btn--active')) {\n    showQueue();\n  }\n}\n\nbackdrop.addEventListener('click', (e) => {\n  if (e.target.className === 'backdrop') {\n    closeModal();\n  }\n});","import { getKey } from './localStorage';\nimport { fetchApiById } from './fetchApiById';\nimport { roundingMethodToFirstPlace } from './fetchMovie';\n\nconst libraryGrid = document.querySelector('.library__grid');\nconst libraryInfo = document.querySelector('.filmless');\nexport const btnLibWatched = document.querySelector('.btn__lib__watched');\nexport const btnLibQueue = document.querySelector('.btn__lib__queue');\nconst library = document.querySelector('.library');\n\nshowFullLibrary();\nbtnLibWatched.addEventListener('click', showWatched);\nbtnLibQueue.addEventListener('click', showQueue);\n\nexport function showFullLibrary() {\n  libraryGrid.innerHTML = '';\n  libraryInfo.innerHTML = '';\n\n  let watchedIdList = [];\n  let queueIdList = [];\n  if (getKey('watched')) {\n    watchedIdList = getKey('watched');\n  }\n  if (getKey('queue')) {\n    queueIdList = getKey('queue');\n  }\n  const fullIdList = [...watchedIdList, ...queueIdList];\n\n  if (watchedIdList.length === 0 && queueIdList.length === 0) {\n    const noLibraryMarkup = `<h2 class=\"filmless__title\">No films have been added to your library</h2>\n      <p>Find something you've watched or something to watch from the most popular</p>\n      <button class=\"modal__btn filmless__button\" onclick=\"location.href='https://rafallpawlak.github.io/filmoteka-group-3/'\" type=\"button\">LET'S GO</button>`;\n    libraryInfo.insertAdjacentHTML('beforeend', noLibraryMarkup);\n  } else {\n    const mainLibraryTitle = `<h2 class=\"filmless__title\">Your full library:<h2>`;\n    libraryInfo.insertAdjacentHTML('beforeend', mainLibraryTitle);\n    for (let id of fullIdList) {\n      fetchApiById(id).then(data => {\n        let yearWithDate = new Date(data.release_date);\n        const genresArray = data.genres.map(genre => {\n          return genre.name;\n        });\n        const markup = `\n      <li>\n        <figure class=\"card\">\n          <div class=\"thumb\" data-id=\"${data.id}\">\n            <img class=\"img\" src=\"https://www.themoviedb.org/t/p/w300${\n              data.poster_path\n            }\" />\n          </div>\n          <figcaption>\n            <h3 class=\"title\">${data.title}</h3>\n            <div class=\"details-wrapper\">\n              <p class=\"details\" data-film_id=\"${data.id}\">${genresArray.join(\n          ', '\n        )} &#124; ${yearWithDate.getFullYear()}</p>\n              <div class=\"rating rating--visible\">${roundingMethodToFirstPlace(\n                data.vote_average\n              )}</div>\n            </div>\n          </figcaption>\n        </figure>\n      </li>\n      `;\n        libraryGrid.insertAdjacentHTML('beforeend', markup);\n      });\n    }\n  }\n}\n\nexport function showWatched() {\n  libraryGrid.innerHTML = '';\n  libraryInfo.innerHTML = '';\n\n  const idList = getKey('watched');\n\n  addBtnActiveClass(btnLibWatched);\n  removeBtnActiveClass(btnLibQueue);\n\n  if (!idList || idList.length === 0) {\n    const noLibraryMarkup = `<h2 class=\"filmless__title\">No films have been added to your watched</h2>\n      <p>Find something you've watched from the most popular</p>\n      <button class=\"modal__btn filmless__button\" onclick=\"location.href='https://rafallpawlak.github.io/filmoteka-group-3/'\" type=\"button\">LET'S GO</button>`;\n    libraryInfo.insertAdjacentHTML('beforeend', noLibraryMarkup);\n  } else {\n    for (let id of idList) {\n      fetchApiById(id).then(data => {\n        let yearWithDate = new Date(data.release_date);\n        const genresArray = data.genres.map(genre => {\n          return genre.name;\n        });\n        const markup = `\n      <li>\n        <figure class=\"card\">\n          <div class=\"thumb\" data-id=\"${data.id}\">\n            <img class=\"img\" src=\"https://www.themoviedb.org/t/p/w300${\n              data.poster_path\n            }\" />\n          </div>\n          <figcaption>\n            <h3 class=\"title\">${data.title}</h3>\n            <div class=\"details-wrapper\">\n              <p class=\"details\" data-film_id=\"${data.id}\">${genresArray.join(\n          ', '\n        )} &#124; ${yearWithDate.getFullYear()}</p>\n              <div class=\"rating rating--visible\">${roundingMethodToFirstPlace(\n                data.vote_average\n              )}</div>\n            </div>\n          </figcaption>\n        </figure>\n      </li>\n      `;\n        libraryGrid.insertAdjacentHTML('beforeend', markup);\n      });\n    }\n  }\n}\n\nexport function showQueue() {\n  libraryGrid.innerHTML = '';\n  libraryInfo.innerHTML = '';\n\n  const idList = getKey('queue');\n\n  addBtnActiveClass(btnLibQueue);\n  removeBtnActiveClass(btnLibWatched);\n\n  if (!idList || idList.length === 0) {\n    const noLibraryMarkup = `<h2 class=\"filmless__title\">No films have been added to your queue list</h2>\n      <p>Find something to watch from the most popular</p>\n      <button class=\"modal__btn filmless__button\" onclick=\"location.href='https://rafallpawlak.github.io/filmoteka-group-3/'\" type=\"button\">LET'S GO</button>`;\n    libraryInfo.insertAdjacentHTML('beforeend', noLibraryMarkup);\n  } else {\n    for (let id of idList) {\n      fetchApiById(id).then(data => {\n        let yearWithDate = new Date(data.release_date);\n        const genresArray = data.genres.map(genre => {\n          return genre.name;\n        });\n        const markup = `\n      <li>\n        <figure class=\"card\">\n          <div class=\"thumb\" data-id=\"${data.id}\">\n            <img class=\"img\" src=\"https://www.themoviedb.org/t/p/w300${\n              data.poster_path\n            }\" />\n          </div>\n          <figcaption>\n            <h3 class=\"title\">${data.title}</h3>\n            <div class=\"details-wrapper\">\n              <p class=\"details\" data-film_id=\"${data.id}\">${genresArray.join(\n          ', '\n        )} &#124; ${yearWithDate.getFullYear()}</p>\n              <div class=\"rating rating--visible\">${roundingMethodToFirstPlace(\n                data.vote_average\n              )}</div>\n            </div>\n          </figcaption>\n        </figure>\n      </li>\n      `;\n        libraryGrid.insertAdjacentHTML('beforeend', markup);\n      });\n    }\n  }\n}\n\nconst addBtnActiveClass = btnToAddClassTo => {\n  if (btnToAddClassTo.classList.contains('btn--active')) {\n    return;\n  }\n  btnToAddClassTo.classList.add('btn--active');\n};\n\nconst removeBtnActiveClass = btnToRemoveClassFrom => {\n  if (!btnToRemoveClassFrom.classList.contains('btn--active')) {\n    return;\n  }\n  btnToRemoveClassFrom.classList.remove('btn--active');\n};\n","export async function fetchApiById(idValue) {\n  try {\n    const API_KEY_V3 = 'bdba5342660bdd1dac5d09b885091a0c';\n    const API_URL = 'https://api.themoviedb.org/3/';\n\n    const params = new URLSearchParams({\n      api_key: API_KEY_V3,\n    });\n    const response = await fetch(API_URL + 'movie/' + idValue + '?' + params);\n    const films = await response.json();\n    return films;\n  } catch (error) {\n      console.log('fetchApiById: ', error);\n  }\n}\n"],"names":["parcelRequire","$4cG42","$8nrFW","$bpxeT","$75b8603781d33cea$export$a9590efecd3afba7","idValue","$75b8603781d33cea$var$_fetchApiById","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","params","response","films","URLSearchParams","api_key","fetch","API_URL","_ctx","sent","json","console","log","t0","$d6b47b7679bedba3$var$libraryGrid","document","querySelector","$d6b47b7679bedba3$var$libraryInfo","$d6b47b7679bedba3$export$d65f4e0883bda19a","$d6b47b7679bedba3$export$70c228520abf1992","$d6b47b7679bedba3$export$3cc22b63c532f48e","innerHTML","watchedIdList","queueIdList","$UL92Z","getKey","fullIdList","concat","length","insertAdjacentHTML","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","value","then","data","yearWithDate","Date","release_date","genresArray","genres","map","genre","name","markup","id","poster_path","title","join","getFullYear","roundingMethodToFirstPlace","vote_average","err","return","$d6b47b7679bedba3$export$c0b6fe2b6c5ef108","idList","$d6b47b7679bedba3$var$addBtnActiveClass","$d6b47b7679bedba3$var$removeBtnActiveClass","$d6b47b7679bedba3$export$a362ca83dec24041","addEventListener","btnToAddClassTo","classList","contains","add","btnToRemoveClassFrom","remove","$46d1392152f720a0$var$body","$46d1392152f720a0$var$card","$46d1392152f720a0$var$modal","$46d1392152f720a0$var$backdrop","$46d1392152f720a0$export$3f6fecd573f3fa48","toggle","$46d1392152f720a0$var$onEscClick","event","code","window","removeEventListener","$46d1392152f720a0$var$loadLibraryListOnModalClose","e","target","parentElement","className","dataset","descriptionTagMovie","closeBtn","changeWatchedQueueList","textModalButtons"],"version":3,"file":"my-library.370c819e.js.map"}